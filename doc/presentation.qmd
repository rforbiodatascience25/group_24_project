---
title: "R bio data science Project"
author: "Group 24"
format: 
  revealjs:
    embed-resources: true
    theme: simple
    background-color: '#253342'
editor: visual
fontsize: 14pt
---

```{r}
library(tidyverse)
library(knitr)
library(here)
```

## Analysis of Biological Factors affecting pediatric Patients subjected to Unmanipulated Allogeneic unrelated donor Hematopoietic Stem Cell Transplantation

Aim: The goal of the project is to analyze which biological factors affect the patient survival rate after bone marrow transplant

#### Group 24: 

#### Christian Hussing

#### Helena Utzon

#### Lanjing Buisan 

#### Inmaculada Echegoyan

#### Pernille Renkwitz

## Biological Background

*Topic:*

-   A bone marrow transplant is the replacement of damaged blood cells for healthy stems cells
-   The success of the transplantion can depend on many different biological factors
-   These factors influences the recovery of the immune system after the transplantion

*Methodology:*

R programming language is a powerful tool that allowed us to clean, visualize, organize, and manipulate the data. Therefore, we were able to understand the correlation of the different varibales affecting to the survival rate after the transplant.

## Data Wrangling

**Dataset:** Bone marrow transplant: Children (Donated 20/04/2020)

**File:** bone-marrow.ariff

An Attribute-Relation File format, .ariff

**Content:** two destinct sections: Header & Data

With comments using: "%"

+------------------------+-------------------------------+
| Header                 | Data                          |
+:======================:+:=============================:+
| -   Contains Metadata  | -   Contains Data information |
|                        |                               |
| -   Name of Relation   | -   comma seperated entries   |
|                        |                               |
| -   List of Attributes |                               |
+------------------------+-------------------------------+

**Steps:**

1.  Download file into newly created data folders
2.  Extract metadata & data into two files: a .txt and a .tsv containing tidy data: *metadata.txt.gz & data.tsv.gz*
3.  Augment columns & binary values

## Description of the data

Table 1. Information on the subjects included in the data.

```{r}
#| echo: false
#| message: false

#read table
Descriptive_table <- read_tsv(file = here("results/Descriptive_table_present.tsv"), col_names = TRUE)

#show table
kable(Descriptive_table, row.names = FALSE, format = "html", align = "r")
```

<br>

-   ALL, AML, chronic and non-malignant: large patient cohort

-   Lymphoma patients: small patient cohort (careful interpretation needed)

-   A majority was male among all diseases

-   Median recipient age did not vary greatly among diseases, but included both pre-adolescent and adolescent ages

-   A minority (\<18 %) experienced relapse, except in the lymphoma group (almost half)

-   A majority survived, except for lymphoma patients

-   Median follow-up time for surviving patients were around 3.5 to 6 years depending on the disease

-   Median survival time for deceased patients varied from around 2 (lymphoma) to around 9 (AML) months

## PCA analysis

::: {layout-ncol="2"}
![](../results/pca_plot.png)

![](../results/rotation_plot.png)
:::

## Recipientage, Disease type, Rbodymass index VS Survival rate

The boxplot plot compares the age distribution of the recipients among the different diseases types, while dividing them by their survival status: alive and dead.

**Relevant outcomes:**

-   Patients with lymphoma had a survial rate of 0%.

-   Age might be associated with mortality, since older patients have higher mortality than young ones.

-   Every disease type exhibited higher mortality than survival.

The bar plot reveals the relationship between the BMI with survival rate. It showed that survival decreases while BMI increases. Underweight patients had the highest amount of survivors, meanwhile, the obese group was the only category which mortality exceeded survival.

::: {layout-ncol="2"}
![](../results/Recipient.png)

![](../results/Rbodymass.png)
:::

\`\`\`

## CD34+ and CD3+ Analysis

::: {layout-ncol="2"}
![](../results/CD34+_dose.png)

![](../results/CD3+_dose.png)
:::

<br> The survivor group shows a slightly higher median dose in both cell types, more evident for CD34+, suggesting that higher CD3+ and especially CD34+ doses may be associated with improved survival.

## Neutrophil and platelet recovery time

::: {layout-ncol="2"}
![](../results/neutrophils.png)

![](../results/platelets.png)
:::

<br>

-   No clear connection between time for neutrophil or platelet recovery and survival time
-   Interpretation should be aware of few data points and influence of outliers

## HLA matching

::: {layout-ncol="2"}
![](../results/match_plot.png)

![](../results/survival_plot.png)
:::

## Conclusion

-   Higher CDC34+ dose and lower BMI appear to be associated with improved survival outcomes

-   CD3+ cell dose, HLA matching, and recovery times for neutrophils and platelets did not show a clear relationship with survival in our dataset

-   Further analysis could be done with more data 


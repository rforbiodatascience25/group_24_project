"0","#| message: false"
"0","#| warning: false"
"0",""
"0","#counted variables and their percentages are generated using the"
"0","#functions N_into_table and Perc, respectivelty"
"0",""
"0","#create descriptive table containing overall counts for each disease"
"0","Tab_desc <- data_clean_aug |>"
"0","  group_by(Disease) |>"
"0","  summarise(N = n())"
"0",""
"0","#add information on recipient gender"
"0","Tab_desc <- N_into_table(data_clean_aug, ""Recipientgender"", Tab_desc)"
"0","Tab_desc <- Perc(Tab_desc, Female, ""Female patients"")"
"0","Tab_desc <- Perc(Tab_desc, Male, ""Male patients"")"
"0",""
"0","#add information on median donor age and recipient age"
"0","age <- data_clean_aug |>"
"0","  group_by(Disease) |>"
"0","  summarise(""Median donor age"" = round(median(Donorage), digits = 0),"
"0","            ""Median recipient age"" = round(median(Recipientage), digits = 0))"
"0","Tab_desc <- full_join(Tab_desc, age, join_by(Disease))"
"0",""
"0","#add information on antigen matches"
"0","Tab_desc <- N_into_table(data_clean_aug, ""Antigen"", Tab_desc)"
"0","Tab_desc <- Perc(Tab_desc, `0 MM`, ""0 antigen mismatches"")"
"0","Tab_desc <- Perc(Tab_desc, `1 MM`, ""1 antigen mismatch"")"
"0","Tab_desc <- Perc(Tab_desc, `2 MM`, ""2 antigen mismatches"")"
"0","Tab_desc <- Perc(Tab_desc, `3 MM`, ""3 antigen mismatches"")"
"0","Tab_desc <- Perc(Tab_desc, `NA`, ""No information on antigen mismatch"")"
"0",""
"0","#add information on relapses"
"0","Tab_desc <- N_into_table(data_clean_aug, ""Relapse"", Tab_desc)"
"0","Tab_desc <- Perc(Tab_desc, Yes, ""Relapse"")"
"0","Tab_desc <- Perc(Tab_desc, No, ""No relapse"")"
"0",""
"0","#add information on graft vs host"
"0","Tab_desc <- N_into_table(data_clean_aug, ""IIIV"", Tab_desc)"
"0","Tab_desc <- Perc(Tab_desc, Yes, ""Acute graft vs host"")"
"0","Tab_desc <- Perc(Tab_desc, No, ""No acute graft vs host"")"
"0",""
"0","#add information on survival status"
"0","Tab_desc <- N_into_table(data_clean_aug, ""survival_status"", Tab_desc)"
"0","Tab_desc <- Perc(Tab_desc, Alive, ""Alive patients"")"
"0","Tab_desc <- Perc(Tab_desc, Dead, ""Deceased patients"")"
"0",""
"0","#add information on follow-up time for alive patients"
"0","FU_time <- data_clean_aug |> "
"0","  group_by(Disease) |>"
"0","  filter(survival_status == ""Alive"") |>"
"0","  summarise(""Median follow-up time for survived patients (days)"" = median(survival_time))"
"0","Tab_desc <- full_join(Tab_desc, FU_time, join_by(Disease))"
"0",""
"0","#add information on survival time for deceased patients"
"0","surv_time <- data_clean_aug |> "
"0","  group_by(Disease) |>"
"0","  filter(survival_status == ""Dead"") |>"
"0","  summarise(""Median survival time for deceased patients (days)"" = "
"0","              round(median(survival_time), digits = 0))"
"0","Tab_desc <- full_join(Tab_desc, surv_time, join_by(Disease))"
"0",""
"0","#Replace NAs for counted variables with 0 (0.0 %)"
"0","Tab_desc <- Tab_desc |>"
"0","  replace_na(list(""1 antigen mismatch"" = ""0 (0.0 %)"", "
"0","                  ""3 antigen mismatches"" = ""0 (0.0 %)"","
"0","                  ""No information on antigen mismatch"" = ""0 (0.0 %)"","
"0","                  ""Alive patients"" = ""0 (0.0 %)""))"
"0",""
"0","#Transpose table"
"0","Tab_desc_transp <- t(Tab_desc)"
"0",""
"0","#Set names of transposed table"
"0","rownames(Tab_desc_transp) <- colnames(Tab_desc)"
"0","colnames(Tab_desc_transp) <- Tab_desc$Disease"
"0",""
"0","#Remove disease row, which is now used as column names in the table"
"0","Tab_desc_transp <- Tab_desc_transp[rownames(Tab_desc_transp) != ""Disease"",]"
"0",""
"0","#Export table"
"0","write.csv(Tab_desc_transp, file = ""Descriptive_table.txt"")"
